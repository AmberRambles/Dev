<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<style>
		html{
			background-color: antiquewhite;
			font-size: 30px;
			text-align: center;
		}
		header h1{
			margin-top: 1rem;
			margin-bottom: 1.5rem;
		}
		#inputDiv{
			margin-bottom: 2rem;
		}
	</style>
    <script>
        function countdown(){
			const outputElement = document.getElementById("outputBox");
			var alertSound = new Audio();
			alertSound.src = "./resources/Alert.wav";
            let timeLeft = document.getElementById("inputTime").value;
			timeLeft = parseInt(timeLeft, 10);
			outputElement.innerHTML = timeLeft;
			function tick(){
				//console.log("Tick");
				if (timeLeft == 0) {
					//console.log("Timer complete.")
					alertSound.play();
					outputElement.innerHTML = "Time is Up!";
					function alertFunct() {
						alert("Time is up!");
					}
					setTimeout(alertFunct, 10);
				}
				else {
					//console.log("Time before update: " + timeLeft);
					timeLeft -= 1;
					//console.log("Time after update: " + timeLeft);
					outputElement.innerHTML = timeLeft;
					//console.log("Updates complete, scheduling next tick.")
					setTimeout(tick, 1000);
				}
			}
			setTimeout(tick, 100);
        }
	/*	document.getElementById("inputTime").addEventListener("keydown", function (event) {
			console.log(`Key ${event.UIEvent.KeyboardEvent.key} pressed`);
			if(event.UIEvent.KeyboardEvent.key === "Enter"){
				event.preventDefault();
			document.getElementById("countDownBttn").click();
			}
		});*/
		//console.log("Page Loaded.");
    </script>
    <title>Amber's Web Timer</title>
</head>
<body>
    <header><h1>Amber's Web Timer</h1></header>
    <main>
		<div id="inputDiv">
        	<label for="inputTime">Enter a time in seconds:</label>
        	<input type="number" name="inputTime" id="inputTime" min="1" step="5">
        	<button id="countDownBttn" onclick="countdown()">Countdown!</button>
        </div>
        <output id="outputBox">#</output>
    </main>
</body>
</html>